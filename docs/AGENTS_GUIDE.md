# WIT - Where Is It - Inventory System
## Multi-Agent Development Strategy

---

## Why Use Specialized Agents?

Each "agent" is a separate Claude Code conversation with focused context:

| Benefit | Description |
|---------|-------------|
| **Smaller Context** | Each agent only loads relevant files |
| **Expertise Focus** | Agent stays in one domain (DB, API, UI) |
| **Parallel Work** | Multiple agents can work simultaneously |
| **Cleaner Code** | Consistent patterns within each layer |
| **Easier Debugging** | Issues isolated to specific layer |

---

## Agent Definitions

### üóÑÔ∏è Agent: DATABASE
**Responsibility:** MongoDB schemas, indexes, migrations, seed data

**Context Files to Load:**
```
/docs/agents/DATABASE_AGENT.md
/docs/ARCHITECTURE.md (database section only)
/server/models/*.js
/server/seeds/*.js
```

**Owns These Files:**
- `/server/models/*.js`
- `/server/seeds/*.js`
- `/server/config/database.js`

**Input From Other Agents:**
- Data requirements from BACKEND agent
- Query patterns from BACKEND agent

**Output To Other Agents:**
- Model definitions
- Available methods (statics, instance methods)
- Index information

---

### ‚öôÔ∏è Agent: BACKEND
**Responsibility:** Express routes, controllers, services, middleware, business logic

**Context Files to Load:**
```
/docs/agents/BACKEND_AGENT.md
/docs/API_PATTERNS.md
/docs/ARCHITECTURE.md
/server/models/*.js (interfaces only - not implementation)
/server/routes/*.js
/server/controllers/*.js
/server/services/*.js
/server/middleware/*.js
```

**Owns These Files:**
- `/server/routes/*.js`
- `/server/controllers/*.js`
- `/server/services/*.js`
- `/server/middleware/*.js`
- `/server/utils/*.js`
- `/server/app.js`
- `/server/server.js`

**Input From Other Agents:**
- Model schemas from DATABASE agent
- API requirements from FRONTEND agent

**Output To Other Agents:**
- API endpoint documentation
- Request/response formats

---

### üé® Agent: FRONTEND
**Responsibility:** HTML, CSS, JavaScript, Vue components, UI/UX

**Context Files to Load:**
```
/docs/agents/FRONTEND_AGENT.md
/docs/API_ENDPOINTS.md (generated by BACKEND)
/client/**/*.js
/client/**/*.html
/client/**/*.css
```

**Owns These Files:**
- `/client/**/*`
- `/public/**/*`

**Input From Other Agents:**
- API endpoints from BACKEND agent
- Data shapes from DATABASE agent

**Output To Other Agents:**
- API requirements (what endpoints are needed)
- Data format preferences

---

### üèóÔ∏è Agent: ARCHITECT
**Responsibility:** System design, integration, cross-cutting concerns, DevOps

**Context Files to Load:**
```
/docs/agents/ARCHITECT_AGENT.md
/docs/ARCHITECTURE.md
/docs/ADR.md
/package.json
/.env.example
/docker-compose.yml (if exists)
```

**Owns These Files:**
- `/docs/ARCHITECTURE.md`
- `/docs/ADR.md`
- `/package.json`
- `/.env.example`
- `/docker-compose.yml`
- `/Dockerfile`
- CI/CD configuration

**Responsibilities:**
- Make architectural decisions
- Resolve cross-agent conflicts
- Define interfaces between layers
- Performance optimization
- Security review

---

### üß™ Agent: QA (Optional)
**Responsibility:** Testing, quality assurance

**Context Files to Load:**
```
/docs/agents/QA_AGENT.md
/tests/**/*
/server/models/*.js (for test data)
/docs/API_ENDPOINTS.md
```

**Owns These Files:**
- `/tests/**/*`
- `/jest.config.js`
- Test utilities

---

## Agent Communication Protocol

Agents communicate through **interface files** in `/docs/interfaces/`:

```
/docs/interfaces/
‚îú‚îÄ‚îÄ models.md          # DATABASE ‚Üí BACKEND, FRONTEND
‚îú‚îÄ‚îÄ api-endpoints.md   # BACKEND ‚Üí FRONTEND
‚îú‚îÄ‚îÄ api-requests.md    # FRONTEND ‚Üí BACKEND (what's needed)
‚îî‚îÄ‚îÄ decisions.md       # ARCHITECT ‚Üí ALL
```

### Example: models.md
```markdown
# Model Interfaces
Generated by: DATABASE Agent
Last Updated: 2024-12-XX

## User Model
- findByEmail(email): User | null
- comparePassword(password): boolean
- generateToken(): string

## Item Model
- findByLocation(locationId): Item[]
- search(query, options): { items, total }
```

### Example: api-endpoints.md
```markdown
# API Endpoints
Generated by: BACKEND Agent
Last Updated: 2024-12-XX

## Auth
POST /api/auth/register
  Body: { email, password, name }
  Response: { success, data: { user, token } }

POST /api/auth/login
  Body: { email, password }
  Response: { success, data: { user } }
  Cookie: token (httpOnly)
```

---

## Workflow: How Agents Collaborate

### New Feature Flow:

```
1. ARCHITECT defines requirements & interfaces
         ‚Üì
2. DATABASE creates/updates models
         ‚Üì
3. DATABASE updates /docs/interfaces/models.md
         ‚Üì
4. BACKEND implements API endpoints
         ‚Üì
5. BACKEND updates /docs/interfaces/api-endpoints.md
         ‚Üì
6. FRONTEND implements UI
         ‚Üì
7. QA writes/runs tests
```

### Example: Implementing US-4.1.1 (Create Item)

**Step 1: ARCHITECT Session**
```
"Read ARCHITECT_AGENT.md. We need to implement US-4.1.1 Create Item.
Define the data requirements and API contract."
```
‚Üí Updates interfaces/api-endpoints.md with POST /api/items spec

**Step 2: DATABASE Session**
```
"Read DATABASE_AGENT.md. Implement the Item model for US-4.1.1.
Requirements: [paste from architect output]"
```
‚Üí Creates /server/models/Item.js
‚Üí Updates interfaces/models.md

**Step 3: BACKEND Session**
```
"Read BACKEND_AGENT.md. Implement POST /api/items for US-4.1.1.
Model interface: [paste from models.md]
API spec: [paste from api-endpoints.md]"
```
‚Üí Creates route, controller, service

**Step 4: FRONTEND Session**
```
"Read FRONTEND_AGENT.md. Create the Add Item form for US-4.1.1.
API endpoint: [paste from api-endpoints.md]"
```
‚Üí Creates UI components

---

## Starting an Agent Session

### Template Prompt:
```
You are the [AGENT_NAME] agent for the WIT (Where Is It) Inventory System.

Read your agent file: /docs/agents/[AGENT_NAME]_AGENT.md
Read the current milestone: /docs/milestones/MILESTONE_[X].md
Read the status: /docs/STATUS.md

Current task: [STORY_ID] - [STORY_TITLE]

[Paste any relevant interface files or context]

Begin implementation.
```

### Quick Start Commands:

**DATABASE Agent:**
```
"You are the DATABASE agent for WIT. Read /docs/agents/DATABASE_AGENT.md 
and /docs/milestones/MILESTONE_1.md. Implement the User model for US-1.1.1."
```

**BACKEND Agent:**
```
"You are the BACKEND agent for WIT. Read /docs/agents/BACKEND_AGENT.md.
Here's the User model interface: [paste]. Implement the registration endpoint."
```

**FRONTEND Agent:**
```
"You are the FRONTEND agent for WIT. Read /docs/agents/FRONTEND_AGENT.md.
Here's the API spec: [paste]. Create the registration form."
```

---

## Conflict Resolution

When agents need to coordinate:

1. **Interface Mismatch:** ARCHITECT resolves
2. **Performance Issues:** ARCHITECT + relevant agent
3. **Feature Questions:** Check user story, ask ARCHITECT
4. **Bug Across Layers:** Start with BACKEND, trace to source

### Escalation Pattern:
```
"ARCHITECT agent: There's a conflict between DATABASE and BACKEND.
DATABASE model has: [describe]
BACKEND expects: [describe]
Please resolve and update interfaces."
```

---

## File Ownership Summary

| Directory | Owner Agent |
|-----------|-------------|
| /server/models | DATABASE |
| /server/seeds | DATABASE |
| /server/routes | BACKEND |
| /server/controllers | BACKEND |
| /server/services | BACKEND |
| /server/middleware | BACKEND |
| /client | FRONTEND |
| /docs | ARCHITECT |
| /tests | QA |

---

## Best Practices

### DO:
- ‚úÖ Load only the agent's context files
- ‚úÖ Update interface files after changes
- ‚úÖ Reference other agents' interfaces, not their code
- ‚úÖ Keep agents focused on their layer
- ‚úÖ Use ARCHITECT for cross-cutting decisions

### DON'T:
- ‚ùå Load entire codebase into one agent
- ‚ùå Have FRONTEND agent modify backend code
- ‚ùå Skip interface updates
- ‚ùå Make architectural decisions in non-ARCHITECT sessions
- ‚ùå Work on unrelated stories in one session

---

## Agent Context Sizes (Approximate)

| Agent | Typical Context | Max Files |
|-------|-----------------|-----------|
| DATABASE | ~2,000 tokens | 5-10 model files |
| BACKEND | ~5,000 tokens | 10-15 files |
| FRONTEND | ~4,000 tokens | 10-15 files |
| ARCHITECT | ~3,000 tokens | Config + docs |
| QA | ~3,000 tokens | Test files |

This keeps each agent well under context limits!

---

*Use this multi-agent approach for efficient, focused development.*
